<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1074">HDU  1074 Doing Homework</a></p>

<p>转化为二进制，状态压缩DP</p>

<!--more-->
<h1 id="doing-homework">Doing Homework</h1>

<h2 id="problem-description">Problem Description</h2>
<p>Ignatius has just come back school from the 30th ACM/ICPC. Now he has a lot of homework to do. Every teacher gives him a deadline of handing in the homework. If Ignatius hands in the homework after the deadline, the teacher will reduce his score of the final test, 1 day for 1 point. And as you know, doing homework always takes a long time. So Ignatius wants you to help him to arrange the order of doing homework to minimize the reduced score.</p>

<h3 id="input">Input</h3>
<p>The input contains several test cases. The first line of the input is a single integer T which is the number of test cases. T test cases follow.
Each test case start with a positive integer N(1&lt;=N&lt;=15) which indicate the number of homework. Then N lines follow. Each line contains a string S(the subject’s name, each string will at most has 100 characters) and two integers D(the deadline of the subject), C(how many days will it take Ignatius to finish this subject’s homework).</p>

<p>Note: All the subject names are given in the alphabet increasing order. So you may process the problem much easier.</p>

<h3 id="output">Output</h3>
<p>For each test case, you should output the smallest total reduced score, then give out the order of the subjects, one subject in a line. If there are more than one orders, you should output the alphabet smallest one.</p>

<h3 id="sample-input">Sample Input</h3>
<p>2</p>

<p>3</p>

<p>Computer 3 3</p>

<p>English 20 1</p>

<p>Math 3 2</p>

<p>3</p>

<p>Computer 3 3</p>

<p>English 6 3</p>

<p>Math 6 3</p>

<h3 id="sample-output">Sample Output</h3>
<p>2</p>

<p>Computer</p>

<p>Math</p>

<p>English</p>

<p>3</p>

<p>Computer</p>

<p>English</p>

<p>Math</p>

<h3 id="hint">Hint</h3>
<p>In the second test case, both Computer-&gt;English-&gt;Math and Computer-&gt;Math-&gt;English leads to reduce 3 points, but the 
word “English” appears earlier than the word “Math”, so we choose the first order. That is so-called alphabet order.</p>

<h2 id="代码">代码:</h2>
<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;stack&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">INF</span> <span class="o">=</span> <span class="mh">0x3f3f3f3f</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">Homework</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">sub</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">dl</span><span class="p">,</span> <span class="n">take</span><span class="p">;</span><span class="c1">//dl为截止日期，take为完成这项作业所花时间
</span><span class="p">}</span><span class="n">a</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="k">struct</span> <span class="n">node</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">time</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">pre</span><span class="p">,</span> <span class="n">now</span><span class="p">;</span>
<span class="p">}</span><span class="n">dp</span><span class="p">[</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">15</span><span class="p">];</span><span class="c1">//枚举每种状态
</span><span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">Output</span><span class="p">(</span><span class="kt">int</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">Output</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">e</span><span class="p">].</span><span class="n">pre</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">dp</span><span class="p">[</span><span class="n">e</span><span class="p">].</span><span class="n">now</span><span class="p">].</span><span class="n">sub</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">t</span><span class="p">;</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sub</span><span class="p">;</span>
            <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">dl</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">take</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">dp</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">score</span> <span class="o">=</span> <span class="n">INF</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span><span class="c1">//要按字典序顺序输出，从后往前递推
</span>            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">;</span><span class="c1">//判断第j项作业
</span>                <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&amp;</span> <span class="n">temp</span><span class="p">)</span><span class="c1">//如果做了
</span>                <span class="p">{</span>
                    <span class="kt">int</span> <span class="n">past</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">temp</span><span class="p">;</span>
                    <span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">past</span><span class="p">].</span><span class="n">time</span><span class="o">+</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">take</span><span class="o">-</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">dl</span><span class="p">;</span>
                    <span class="c1">//最后做第j项作业将扣掉的分数，总是&gt;=0的
</span>                    <span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">status</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">+</span> <span class="n">dp</span><span class="p">[</span><span class="n">past</span><span class="p">].</span><span class="n">score</span> <span class="o">&lt;</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">score</span><span class="p">)</span>
                    <span class="c1">//最后做第j项作业所扣分数比原来少，作为最优解
</span>                    <span class="p">{</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">score</span> <span class="o">=</span> <span class="n">status</span> <span class="o">+</span> <span class="n">dp</span><span class="p">[</span><span class="n">past</span><span class="p">].</span><span class="n">score</span><span class="p">;</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">pre</span> <span class="o">=</span> <span class="n">past</span><span class="p">;</span><span class="c1">//更新路径
</span>                        <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">now</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">time</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">past</span><span class="p">].</span><span class="n">time</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">take</span><span class="p">;</span><span class="c1">//更新所用时间
</span>                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">dp</span><span class="p">[</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">score</span><span class="p">);</span><span class="c1">//所有作业都完成的最终状态
</span>        <span class="n">Output</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="c1">//递归打印路径
</span>        <span class="cm">/*
        stack&lt;int&gt;s;
        int temp = end - 1;
        printf("%d\n", dp[temp].score);
        while(temp)
        {
            s.push(dp[temp].now);
            temp = dp[temp].pre;
        }
        while(!s.empty())
        {
            cout &lt;&lt; a[s.top()].sub &lt;&lt; endl;
            s.pop();
        }
        */</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>
