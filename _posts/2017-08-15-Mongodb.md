---
layout: post
tags:
  - Database
title: "MongoDB基本操作"
category: Database
---


## MongoDB启动:
在Mac terminal中输入如下命令以启动MongoDB:
```bash
mongod -config /usr/local/etc/mongod.conf
```

新建一个terminal窗口，输入以下命令进入MongoDB进行操作：
```bash
mongo
>MongoDB shell version ...
```

## MongoDB 连接命令格式
使用用户名和密码连接到 MongoDB 服务器，你必须使用 'username:password@hostname/dbname' 格式，'username'为用户名，'password' 为密码。
使用用户名和密码连接登陆到默认数据库：
```bash
$ ./mongo
MongoDB shell version: 3.0.6
connecting to: test
```
使用用户 admin 使用密码 123456 连接到本地的 MongoDB 服务上。输出结果如下所示：
```bash
>mongodb://admin:123456@localhost/
... 
```
使用用户名和密码连接登陆到指定数据库，格式如下：
```bash
mongodb://admin:123456@localhost/test
```
### 更多连接实例
连接本地数据库服务器，端口是默认的。
```bash
mongodb://localhost
```

使用用户名fred，密码foobar登录localhost的admin数据库。
```bash
mongodb://fred:foobar@localhost  
```

使用用户名fred，密码foobar登录localhost的baz数据库。
```bash
mongodb://fred:foobar@localhost/baz  
```

连接 `replica pair`, 服务器1为example1.com服务器2为example2。
```bash
mongodb://example1.com:27017,example2.com:27017  
```

连接 replica set 三台服务器 (端口 27017, 27018, 和27019):
```bash
mongodb://localhost,localhost:27018,localhost:27019  
```

连接 replica set 三台服务器, 写入操作应用在主服务器 并且分布查询到从服务器。
```bash
mongodb://host1,host2,host3/?slaveOk=true  
```

直接连接第一个服务器，无论是replica set一部分或者主服务器或者从服务器。
```bash
mongodb://host1,host2,host3/?connect=direct;slaveOk=true  
```

当你的连接服务器有优先级，还需要列出所有服务器，你可以使用上述连接方式。
安全模式连接到localhost:
```bash
mongodb://localhost/?safe=true  
```

以安全模式连接到replica set，并且等待至少两个复制服务器成功写入，超时时间设置为2秒。
```bash
mongodb://host1,host2,host3/?safe=true;w=2;wtimeoutMS=2000
```


## 基本操作:
查看当前数据库:
```bash
>db
test
```
查看全部数据库列表:
```bash
>show dbs
admin  0.000GB
local  0.000GB
test   0.000GB
```

切换或创建数据库: 
```bash
>use local
switched to db local
>db
local
```

查看帮助: `help` or `db.help()`

删除数据库: `db.dropDatabase()`



